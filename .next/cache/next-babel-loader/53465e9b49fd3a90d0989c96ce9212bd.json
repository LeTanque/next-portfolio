{"ast":null,"code":"import _WeakMap from \"@babel/runtime-corejs2/core-js/weak-map\";\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\nimport { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n  var lights = new WebGLLights();\n  var lightsArray = [];\n  var shadowsArray = [];\n\n  function init() {\n    lightsArray.length = 0;\n    shadowsArray.length = 0;\n  }\n\n  function pushLight(light) {\n    lightsArray.push(light);\n  }\n\n  function pushShadow(shadowLight) {\n    shadowsArray.push(shadowLight);\n  }\n\n  function setupLights(camera) {\n    lights.setup(lightsArray, shadowsArray, camera);\n  }\n\n  var state = {\n    lightsArray: lightsArray,\n    shadowsArray: shadowsArray,\n    lights: lights\n  };\n  return {\n    init: init,\n    state: state,\n    setupLights: setupLights,\n    pushLight: pushLight,\n    pushShadow: pushShadow\n  };\n}\n\nfunction WebGLRenderStates() {\n  var renderStates = new _WeakMap();\n\n  function onSceneDispose(event) {\n    var scene = event.target;\n    scene.removeEventListener('dispose', onSceneDispose);\n    renderStates.delete(scene);\n  }\n\n  function get(scene, camera) {\n    var renderState;\n\n    if (renderStates.has(scene) === false) {\n      renderState = new WebGLRenderState();\n      renderStates.set(scene, new _WeakMap());\n      renderStates.get(scene).set(camera, renderState);\n      scene.addEventListener('dispose', onSceneDispose);\n    } else {\n      if (renderStates.get(scene).has(camera) === false) {\n        renderState = new WebGLRenderState();\n        renderStates.get(scene).set(camera, renderState);\n      } else {\n        renderState = renderStates.get(scene).get(camera);\n      }\n    }\n\n    return renderState;\n  }\n\n  function dispose() {\n    renderStates = new _WeakMap();\n  }\n\n  return {\n    get: get,\n    dispose: dispose\n  };\n}\n\nexport { WebGLRenderStates };","map":{"version":3,"sources":["/Users/tank/git/Portfolio/next-portfolio/node_modules/three/src/renderers/webgl/WebGLRenderStates.js"],"names":["WebGLLights","WebGLRenderState","lights","lightsArray","shadowsArray","init","length","pushLight","light","push","pushShadow","shadowLight","setupLights","camera","setup","state","WebGLRenderStates","renderStates","onSceneDispose","event","scene","target","removeEventListener","delete","get","renderState","has","set","addEventListener","dispose"],"mappings":";;AAAA;;;AAIA,SAASA,WAAT,QAA4B,kBAA5B;;AAEA,SAASC,gBAAT,GAA4B;AAE3B,MAAIC,MAAM,GAAG,IAAIF,WAAJ,EAAb;AAEA,MAAIG,WAAW,GAAG,EAAlB;AACA,MAAIC,YAAY,GAAG,EAAnB;;AAEA,WAASC,IAAT,GAAgB;AAEfF,IAAAA,WAAW,CAACG,MAAZ,GAAqB,CAArB;AACAF,IAAAA,YAAY,CAACE,MAAb,GAAsB,CAAtB;AAEA;;AAED,WAASC,SAAT,CAAoBC,KAApB,EAA4B;AAE3BL,IAAAA,WAAW,CAACM,IAAZ,CAAkBD,KAAlB;AAEA;;AAED,WAASE,UAAT,CAAqBC,WAArB,EAAmC;AAElCP,IAAAA,YAAY,CAACK,IAAb,CAAmBE,WAAnB;AAEA;;AAED,WAASC,WAAT,CAAsBC,MAAtB,EAA+B;AAE9BX,IAAAA,MAAM,CAACY,KAAP,CAAcX,WAAd,EAA2BC,YAA3B,EAAyCS,MAAzC;AAEA;;AAED,MAAIE,KAAK,GAAG;AACXZ,IAAAA,WAAW,EAAEA,WADF;AAEXC,IAAAA,YAAY,EAAEA,YAFH;AAIXF,IAAAA,MAAM,EAAEA;AAJG,GAAZ;AAOA,SAAO;AACNG,IAAAA,IAAI,EAAEA,IADA;AAENU,IAAAA,KAAK,EAAEA,KAFD;AAGNH,IAAAA,WAAW,EAAEA,WAHP;AAKNL,IAAAA,SAAS,EAAEA,SALL;AAMNG,IAAAA,UAAU,EAAEA;AANN,GAAP;AASA;;AAED,SAASM,iBAAT,GAA6B;AAE5B,MAAIC,YAAY,GAAG,cAAnB;;AAEA,WAASC,cAAT,CAAyBC,KAAzB,EAAiC;AAEhC,QAAIC,KAAK,GAAGD,KAAK,CAACE,MAAlB;AAEAD,IAAAA,KAAK,CAACE,mBAAN,CAA2B,SAA3B,EAAsCJ,cAAtC;AAEAD,IAAAA,YAAY,CAACM,MAAb,CAAqBH,KAArB;AAEA;;AAED,WAASI,GAAT,CAAcJ,KAAd,EAAqBP,MAArB,EAA8B;AAE7B,QAAIY,WAAJ;;AAEA,QAAKR,YAAY,CAACS,GAAb,CAAkBN,KAAlB,MAA8B,KAAnC,EAA2C;AAE1CK,MAAAA,WAAW,GAAG,IAAIxB,gBAAJ,EAAd;AACAgB,MAAAA,YAAY,CAACU,GAAb,CAAkBP,KAAlB,EAAyB,cAAzB;AACAH,MAAAA,YAAY,CAACO,GAAb,CAAkBJ,KAAlB,EAA0BO,GAA1B,CAA+Bd,MAA/B,EAAuCY,WAAvC;AAEAL,MAAAA,KAAK,CAACQ,gBAAN,CAAwB,SAAxB,EAAmCV,cAAnC;AAEA,KARD,MAQO;AAEN,UAAKD,YAAY,CAACO,GAAb,CAAkBJ,KAAlB,EAA0BM,GAA1B,CAA+Bb,MAA/B,MAA4C,KAAjD,EAAyD;AAExDY,QAAAA,WAAW,GAAG,IAAIxB,gBAAJ,EAAd;AACAgB,QAAAA,YAAY,CAACO,GAAb,CAAkBJ,KAAlB,EAA0BO,GAA1B,CAA+Bd,MAA/B,EAAuCY,WAAvC;AAEA,OALD,MAKO;AAENA,QAAAA,WAAW,GAAGR,YAAY,CAACO,GAAb,CAAkBJ,KAAlB,EAA0BI,GAA1B,CAA+BX,MAA/B,CAAd;AAEA;AAED;;AAED,WAAOY,WAAP;AAEA;;AAED,WAASI,OAAT,GAAmB;AAElBZ,IAAAA,YAAY,GAAG,cAAf;AAEA;;AAED,SAAO;AACNO,IAAAA,GAAG,EAAEA,GADC;AAENK,IAAAA,OAAO,EAAEA;AAFH,GAAP;AAKA;;AAGD,SAASb,iBAAT","sourcesContent":["/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n\n\tvar lights = new WebGLLights();\n\n\tvar lightsArray = [];\n\tvar shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tvar state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tvar renderStates = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\trenderStates.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n"]},"metadata":{},"sourceType":"module"}