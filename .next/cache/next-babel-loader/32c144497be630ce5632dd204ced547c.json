{"ast":null,"code":"import _WeakMap from \"@babel/runtime-corejs2/core-js/weak-map\";\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\nfunction WebGLAttributes(gl) {\n  var buffers = new _WeakMap();\n\n  function createBuffer(attribute, bufferType) {\n    var array = attribute.array;\n    var usage = attribute.usage;\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(bufferType, buffer);\n    gl.bufferData(bufferType, array, usage);\n    attribute.onUploadCallback();\n    var type = gl.FLOAT;\n\n    if (array instanceof Float32Array) {\n      type = gl.FLOAT;\n    } else if (array instanceof Float64Array) {\n      console.warn('THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.');\n    } else if (array instanceof Uint16Array) {\n      type = gl.UNSIGNED_SHORT;\n    } else if (array instanceof Int16Array) {\n      type = gl.SHORT;\n    } else if (array instanceof Uint32Array) {\n      type = gl.UNSIGNED_INT;\n    } else if (array instanceof Int32Array) {\n      type = gl.INT;\n    } else if (array instanceof Int8Array) {\n      type = gl.BYTE;\n    } else if (array instanceof Uint8Array) {\n      type = gl.UNSIGNED_BYTE;\n    }\n\n    return {\n      buffer: buffer,\n      type: type,\n      bytesPerElement: array.BYTES_PER_ELEMENT,\n      version: attribute.version\n    };\n  }\n\n  function updateBuffer(buffer, attribute, bufferType) {\n    var array = attribute.array;\n    var updateRange = attribute.updateRange;\n    gl.bindBuffer(bufferType, buffer);\n\n    if (updateRange.count === -1) {\n      // Not using update ranges\n      gl.bufferSubData(bufferType, 0, array);\n    } else {\n      gl.bufferSubData(bufferType, updateRange.offset * array.BYTES_PER_ELEMENT, array.subarray(updateRange.offset, updateRange.offset + updateRange.count));\n      updateRange.count = -1; // reset range\n    }\n  } //\n\n\n  function get(attribute) {\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    return buffers.get(attribute);\n  }\n\n  function remove(attribute) {\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    var data = buffers.get(attribute);\n\n    if (data) {\n      gl.deleteBuffer(data.buffer);\n      buffers.delete(attribute);\n    }\n  }\n\n  function update(attribute, bufferType) {\n    if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n    var data = buffers.get(attribute);\n\n    if (data === undefined) {\n      buffers.set(attribute, createBuffer(attribute, bufferType));\n    } else if (data.version < attribute.version) {\n      updateBuffer(data.buffer, attribute, bufferType);\n      data.version = attribute.version;\n    }\n  }\n\n  return {\n    get: get,\n    remove: remove,\n    update: update\n  };\n}\n\nexport { WebGLAttributes };","map":{"version":3,"sources":["/Users/tank/git/Portfolio/next-portfolio/node_modules/three/src/renderers/webgl/WebGLAttributes.js"],"names":["WebGLAttributes","gl","buffers","createBuffer","attribute","bufferType","array","usage","buffer","bindBuffer","bufferData","onUploadCallback","type","FLOAT","Float32Array","Float64Array","console","warn","Uint16Array","UNSIGNED_SHORT","Int16Array","SHORT","Uint32Array","UNSIGNED_INT","Int32Array","INT","Int8Array","BYTE","Uint8Array","UNSIGNED_BYTE","bytesPerElement","BYTES_PER_ELEMENT","version","updateBuffer","updateRange","count","bufferSubData","offset","subarray","get","isInterleavedBufferAttribute","data","remove","deleteBuffer","delete","update","undefined","set"],"mappings":"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","sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl ) {\n\n\tvar buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.usage;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n"]},"metadata":{},"sourceType":"module"}