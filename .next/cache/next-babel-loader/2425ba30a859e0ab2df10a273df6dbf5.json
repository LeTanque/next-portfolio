{"ast":null,"code":"import _Map from \"@babel/runtime-corejs2/core-js/map\";\nimport { scheduler } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { hasActiveObservations } from './algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from './algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from './algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from './algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from './algorithms/gatherActiveObservationsAtDepth';\nvar resizeObservers = [];\nvar observerMap = new _Map();\nvar watching = 0;\n\nvar updateCount = function updateCount(n) {\n  !watching && n > 0 && scheduler.start();\n  watching += n;\n  !watching && scheduler.stop();\n};\n\nvar getObservationIndex = function getObservationIndex(observationTargets, target) {\n  for (var i = 0; i < observationTargets.length; i += 1) {\n    if (observationTargets[i].target === target) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar process = function process() {\n  var depth = 0;\n  gatherActiveObservationsAtDepth(depth);\n\n  while (hasActiveObservations()) {\n    depth = broadcastActiveObservations();\n    gatherActiveObservationsAtDepth(depth);\n  }\n\n  if (hasSkippedObservations()) {\n    deliverResizeLoopError();\n  }\n\n  return depth > 0;\n};\n\nvar ResizeObserverController = function () {\n  function ResizeObserverController() {}\n\n  ResizeObserverController.connect = function (resizeObserver, callback) {\n    var detail = new ResizeObserverDetail(resizeObserver, callback);\n    resizeObservers.push(detail);\n    observerMap.set(resizeObserver, detail);\n  };\n\n  ResizeObserverController.observe = function (resizeObserver, target, options) {\n    if (observerMap.has(resizeObserver)) {\n      var detail = observerMap.get(resizeObserver);\n\n      if (getObservationIndex(detail.observationTargets, target) < 0) {\n        detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n        updateCount(1);\n        scheduler.schedule();\n      }\n    }\n  };\n\n  ResizeObserverController.unobserve = function (resizeObserver, target) {\n    if (observerMap.has(resizeObserver)) {\n      var detail = observerMap.get(resizeObserver);\n      var index = getObservationIndex(detail.observationTargets, target);\n\n      if (index >= 0) {\n        detail.observationTargets.splice(index, 1);\n        updateCount(-1);\n      }\n    }\n  };\n\n  ResizeObserverController.disconnect = function (resizeObserver) {\n    if (observerMap.has(resizeObserver)) {\n      var detail = observerMap.get(resizeObserver);\n      resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n      observerMap[\"delete\"](resizeObserver);\n      updateCount(-detail.observationTargets.length);\n    }\n  };\n\n  return ResizeObserverController;\n}();\n\nvar isWatching = function isWatching() {\n  return !!watching;\n};\n\nexport { ResizeObserverController, resizeObservers, process, isWatching };","map":{"version":3,"sources":["/Users/tank/git/Portfolio/next-portfolio/node_modules/@juggle/resize-observer/lib/ResizeObserverController.js"],"names":["scheduler","ResizeObservation","ResizeObserverDetail","hasActiveObservations","hasSkippedObservations","deliverResizeLoopError","broadcastActiveObservations","gatherActiveObservationsAtDepth","resizeObservers","observerMap","watching","updateCount","n","start","stop","getObservationIndex","observationTargets","target","i","length","process","depth","ResizeObserverController","connect","resizeObserver","callback","detail","push","set","observe","options","has","get","box","schedule","unobserve","index","splice","disconnect","indexOf","isWatching"],"mappings":"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","sourcesContent":["import { scheduler } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { hasActiveObservations } from './algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from './algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from './algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from './algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from './algorithms/gatherActiveObservationsAtDepth';\nvar resizeObservers = [];\nvar observerMap = new Map();\nvar watching = 0;\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        resizeObservers.push(detail);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        if (observerMap.has(resizeObserver)) {\n            var detail = observerMap.get(resizeObserver);\n            if (getObservationIndex(detail.observationTargets, target) < 0) {\n                detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n                updateCount(1);\n                scheduler.schedule();\n            }\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        if (observerMap.has(resizeObserver)) {\n            var detail = observerMap.get(resizeObserver);\n            var index = getObservationIndex(detail.observationTargets, target);\n            if (index >= 0) {\n                detail.observationTargets.splice(index, 1);\n                updateCount(-1);\n            }\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        if (observerMap.has(resizeObserver)) {\n            var detail = observerMap.get(resizeObserver);\n            resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            observerMap.delete(resizeObserver);\n            updateCount(-detail.observationTargets.length);\n        }\n    };\n    return ResizeObserverController;\n}());\nvar isWatching = function () { return !!watching; };\nexport { ResizeObserverController, resizeObservers, process, isWatching };\n"]},"metadata":{},"sourceType":"module"}