{"ast":null,"code":"import _Object$create from \"@babel/runtime-corejs2/core-js/object/create\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport { Vector3 } from '../math/Vector3.js';\nimport { Object3D } from '../core/Object3D.js';\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v1 = new Vector3();\n\nvar _v2 = new Vector3();\n\nfunction LOD() {\n  Object3D.call(this);\n  this.type = 'LOD';\n\n  _Object$defineProperties(this, {\n    levels: {\n      enumerable: true,\n      value: []\n    }\n  });\n\n  this.autoUpdate = true;\n}\n\nLOD.prototype = _Object$assign(_Object$create(Object3D.prototype), {\n  constructor: LOD,\n  isLOD: true,\n  copy: function (source) {\n    Object3D.prototype.copy.call(this, source, false);\n    var levels = source.levels;\n\n    for (var i = 0, l = levels.length; i < l; i++) {\n      var level = levels[i];\n      this.addLevel(level.object.clone(), level.distance);\n    }\n\n    this.autoUpdate = source.autoUpdate;\n    return this;\n  },\n  addLevel: function (object, distance) {\n    if (distance === undefined) distance = 0;\n    distance = Math.abs(distance);\n    var levels = this.levels;\n\n    for (var l = 0; l < levels.length; l++) {\n      if (distance < levels[l].distance) {\n        break;\n      }\n    }\n\n    levels.splice(l, 0, {\n      distance: distance,\n      object: object\n    });\n    this.add(object);\n    return this;\n  },\n  getObjectForDistance: function (distance) {\n    var levels = this.levels;\n\n    if (levels.length > 0) {\n      for (var i = 1, l = levels.length; i < l; i++) {\n        if (distance < levels[i].distance) {\n          break;\n        }\n      }\n\n      return levels[i - 1].object;\n    }\n\n    return null;\n  },\n  raycast: function (raycaster, intersects) {\n    var levels = this.levels;\n\n    if (levels.length > 0) {\n      _v1.setFromMatrixPosition(this.matrixWorld);\n\n      var distance = raycaster.ray.origin.distanceTo(_v1);\n      this.getObjectForDistance(distance).raycast(raycaster, intersects);\n    }\n  },\n  update: function (camera) {\n    var levels = this.levels;\n\n    if (levels.length > 1) {\n      _v1.setFromMatrixPosition(camera.matrixWorld);\n\n      _v2.setFromMatrixPosition(this.matrixWorld);\n\n      var distance = _v1.distanceTo(_v2);\n\n      levels[0].object.visible = true;\n\n      for (var i = 1, l = levels.length; i < l; i++) {\n        if (distance >= levels[i].distance) {\n          levels[i - 1].object.visible = false;\n          levels[i].object.visible = true;\n        } else {\n          break;\n        }\n      }\n\n      for (; i < l; i++) {\n        levels[i].object.visible = false;\n      }\n    }\n  },\n  toJSON: function (meta) {\n    var data = Object3D.prototype.toJSON.call(this, meta);\n    if (this.autoUpdate === false) data.object.autoUpdate = false;\n    data.object.levels = [];\n    var levels = this.levels;\n\n    for (var i = 0, l = levels.length; i < l; i++) {\n      var level = levels[i];\n      data.object.levels.push({\n        object: level.object.uuid,\n        distance: level.distance\n      });\n    }\n\n    return data;\n  }\n});\nexport { LOD };","map":{"version":3,"sources":["/Users/tank/git/Portfolio/next-portfolio/node_modules/three/src/objects/LOD.js"],"names":["Vector3","Object3D","_v1","_v2","LOD","call","type","levels","enumerable","value","autoUpdate","prototype","constructor","isLOD","copy","source","i","l","length","level","addLevel","object","clone","distance","undefined","Math","abs","splice","add","getObjectForDistance","raycast","raycaster","intersects","setFromMatrixPosition","matrixWorld","ray","origin","distanceTo","update","camera","visible","toJSON","meta","data","push","uuid"],"mappings":"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","sourcesContent":["import { Vector3 } from '../math/Vector3.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n\tthis.autoUpdate = true;\n\n}\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tisLOD: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tvar levels = source.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( _v1 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( camera ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = _v1.distanceTo( _v2 );\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { LOD };\n"]},"metadata":{},"sourceType":"module"}