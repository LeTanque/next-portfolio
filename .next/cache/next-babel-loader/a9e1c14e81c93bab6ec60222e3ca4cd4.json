{"ast":null,"code":"/**\n * @author Mugen87 / https://github.com/Mugen87\n * Port from https://github.com/mapbox/earcut (v2.1.5)\n */\nvar Earcut = {\n  triangulate: function (data, holeIndices, dim) {\n    dim = dim || 2;\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n    var minX, minY, maxX, maxY, x, y, invSize;\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim); // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\n    if (data.length > 80 * dim) {\n      minX = maxX = data[0];\n      minY = maxY = data[1];\n\n      for (var i = dim; i < outerLen; i += dim) {\n        x = data[i];\n        y = data[i + 1];\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n      } // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\n\n      invSize = Math.max(maxX - minX, maxY - minY);\n      invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n    return triangles;\n  }\n}; // create a circular doubly linked list from polygon points in the specified winding order\n\nfunction linkedList(data, start, end, dim, clockwise) {\n  var i, last;\n\n  if (clockwise === signedArea(data, start, end, dim) > 0) {\n    for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n  } else {\n    for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n  }\n\n  if (last && equals(last, last.next)) {\n    removeNode(last);\n    last = last.next;\n  }\n\n  return last;\n} // eliminate colinear or duplicate points\n\n\nfunction filterPoints(start, end) {\n  if (!start) return start;\n  if (!end) end = start;\n  var p = start,\n      again;\n\n  do {\n    again = false;\n\n    if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n      removeNode(p);\n      p = end = p.prev;\n      if (p === p.next) break;\n      again = true;\n    } else {\n      p = p.next;\n    }\n  } while (again || p !== end);\n\n  return end;\n} // main ear slicing loop which triangulates a polygon (given as a linked list)\n\n\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n  if (!ear) return; // interlink polygon nodes in z-order\n\n  if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n  var stop = ear,\n      prev,\n      next; // iterate through ears, slicing them one by one\n\n  while (ear.prev !== ear.next) {\n    prev = ear.prev;\n    next = ear.next;\n\n    if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n      // cut off the triangle\n      triangles.push(prev.i / dim);\n      triangles.push(ear.i / dim);\n      triangles.push(next.i / dim);\n      removeNode(ear); // skipping the next vertex leads to less sliver triangles\n\n      ear = next.next;\n      stop = next.next;\n      continue;\n    }\n\n    ear = next; // if we looped through the whole remaining polygon and can't find any more ears\n\n    if (ear === stop) {\n      // try filtering points and slicing again\n      if (!pass) {\n        earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1); // if this didn't work, try curing all small self-intersections locally\n      } else if (pass === 1) {\n        ear = cureLocalIntersections(ear, triangles, dim);\n        earcutLinked(ear, triangles, dim, minX, minY, invSize, 2); // as a last resort, try splitting the remaining polygon into two\n      } else if (pass === 2) {\n        splitEarcut(ear, triangles, dim, minX, minY, invSize);\n      }\n\n      break;\n    }\n  }\n} // check whether a polygon node forms a valid ear with adjacent nodes\n\n\nfunction isEar(ear) {\n  var a = ear.prev,\n      b = ear,\n      c = ear.next;\n  if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n  // now make sure we don't have other points inside the potential ear\n\n  var p = ear.next.next;\n\n  while (p !== ear.prev) {\n    if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n    p = p.next;\n  }\n\n  return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n  var a = ear.prev,\n      b = ear,\n      c = ear.next;\n  if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n  // triangle bbox; min & max are calculated like this for speed\n\n  var minTX = a.x < b.x ? a.x < c.x ? a.x : c.x : b.x < c.x ? b.x : c.x,\n      minTY = a.y < b.y ? a.y < c.y ? a.y : c.y : b.y < c.y ? b.y : c.y,\n      maxTX = a.x > b.x ? a.x > c.x ? a.x : c.x : b.x > c.x ? b.x : c.x,\n      maxTY = a.y > b.y ? a.y > c.y ? a.y : c.y : b.y > c.y ? b.y : c.y; // z-order range for the current triangle bbox;\n\n  var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n      maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n  var p = ear.prevZ,\n      n = ear.nextZ; // look for points inside the triangle in both directions\n\n  while (p && p.z >= minZ && n && n.z <= maxZ) {\n    if (p !== ear.prev && p !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n    p = p.prevZ;\n    if (n !== ear.prev && n !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n    n = n.nextZ;\n  } // look for remaining points in decreasing z-order\n\n\n  while (p && p.z >= minZ) {\n    if (p !== ear.prev && p !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n    p = p.prevZ;\n  } // look for remaining points in increasing z-order\n\n\n  while (n && n.z <= maxZ) {\n    if (n !== ear.prev && n !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n    n = n.nextZ;\n  }\n\n  return true;\n} // go through all polygon nodes and cure small local self-intersections\n\n\nfunction cureLocalIntersections(start, triangles, dim) {\n  var p = start;\n\n  do {\n    var a = p.prev,\n        b = p.next.next;\n\n    if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n      triangles.push(a.i / dim);\n      triangles.push(p.i / dim);\n      triangles.push(b.i / dim); // remove two nodes involved\n\n      removeNode(p);\n      removeNode(p.next);\n      p = start = b;\n    }\n\n    p = p.next;\n  } while (p !== start);\n\n  return p;\n} // try splitting polygon into two and triangulate them independently\n\n\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n  // look for a valid diagonal that divides the polygon into two\n  var a = start;\n\n  do {\n    var b = a.next.next;\n\n    while (b !== a.prev) {\n      if (a.i !== b.i && isValidDiagonal(a, b)) {\n        // split the polygon in two by the diagonal\n        var c = splitPolygon(a, b); // filter colinear points around the cuts\n\n        a = filterPoints(a, a.next);\n        c = filterPoints(c, c.next); // run earcut on each half\n\n        earcutLinked(a, triangles, dim, minX, minY, invSize);\n        earcutLinked(c, triangles, dim, minX, minY, invSize);\n        return;\n      }\n\n      b = b.next;\n    }\n\n    a = a.next;\n  } while (a !== start);\n} // link every hole into the outer loop, producing a single-ring polygon without holes\n\n\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n  var queue = [],\n      i,\n      len,\n      start,\n      end,\n      list;\n\n  for (i = 0, len = holeIndices.length; i < len; i++) {\n    start = holeIndices[i] * dim;\n    end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n    list = linkedList(data, start, end, dim, false);\n    if (list === list.next) list.steiner = true;\n    queue.push(getLeftmost(list));\n  }\n\n  queue.sort(compareX); // process holes from left to right\n\n  for (i = 0; i < queue.length; i++) {\n    eliminateHole(queue[i], outerNode);\n    outerNode = filterPoints(outerNode, outerNode.next);\n  }\n\n  return outerNode;\n}\n\nfunction compareX(a, b) {\n  return a.x - b.x;\n} // find a bridge between vertices that connects hole with an outer ring and and link it\n\n\nfunction eliminateHole(hole, outerNode) {\n  outerNode = findHoleBridge(hole, outerNode);\n\n  if (outerNode) {\n    var b = splitPolygon(outerNode, hole);\n    filterPoints(b, b.next);\n  }\n} // David Eberly's algorithm for finding a bridge between hole and outer polygon\n\n\nfunction findHoleBridge(hole, outerNode) {\n  var p = outerNode,\n      hx = hole.x,\n      hy = hole.y,\n      qx = -Infinity,\n      m; // find a segment intersected by a ray from the hole's leftmost point to the left;\n  // segment's endpoint with lesser x will be potential connection point\n\n  do {\n    if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n      var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n\n      if (x <= hx && x > qx) {\n        qx = x;\n\n        if (x === hx) {\n          if (hy === p.y) return p;\n          if (hy === p.next.y) return p.next;\n        }\n\n        m = p.x < p.next.x ? p : p.next;\n      }\n    }\n\n    p = p.next;\n  } while (p !== outerNode);\n\n  if (!m) return null;\n  if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n  // look for points inside the triangle of hole point, segment intersection and endpoint;\n  // if there are no points found, we have a valid connection;\n  // otherwise choose the point of the minimum angle with the ray as connection point\n\n  var stop = m,\n      mx = m.x,\n      my = m.y,\n      tanMin = Infinity,\n      tan;\n  p = m.next;\n\n  while (p !== stop) {\n    if (hx >= p.x && p.x >= mx && hx !== p.x && pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n      tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n      if ((tan < tanMin || tan === tanMin && p.x > m.x) && locallyInside(p, hole)) {\n        m = p;\n        tanMin = tan;\n      }\n    }\n\n    p = p.next;\n  }\n\n  return m;\n} // interlink polygon nodes in z-order\n\n\nfunction indexCurve(start, minX, minY, invSize) {\n  var p = start;\n\n  do {\n    if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n    p.prevZ = p.prev;\n    p.nextZ = p.next;\n    p = p.next;\n  } while (p !== start);\n\n  p.prevZ.nextZ = null;\n  p.prevZ = null;\n  sortLinked(p);\n} // Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n\n\nfunction sortLinked(list) {\n  var i,\n      p,\n      q,\n      e,\n      tail,\n      numMerges,\n      pSize,\n      qSize,\n      inSize = 1;\n\n  do {\n    p = list;\n    list = null;\n    tail = null;\n    numMerges = 0;\n\n    while (p) {\n      numMerges++;\n      q = p;\n      pSize = 0;\n\n      for (i = 0; i < inSize; i++) {\n        pSize++;\n        q = q.nextZ;\n        if (!q) break;\n      }\n\n      qSize = inSize;\n\n      while (pSize > 0 || qSize > 0 && q) {\n        if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n          e = p;\n          p = p.nextZ;\n          pSize--;\n        } else {\n          e = q;\n          q = q.nextZ;\n          qSize--;\n        }\n\n        if (tail) tail.nextZ = e;else list = e;\n        e.prevZ = tail;\n        tail = e;\n      }\n\n      p = q;\n    }\n\n    tail.nextZ = null;\n    inSize *= 2;\n  } while (numMerges > 1);\n\n  return list;\n} // z-order of a point given coords and inverse of the longer side of data bbox\n\n\nfunction zOrder(x, y, minX, minY, invSize) {\n  // coords are transformed into non-negative 15-bit integer range\n  x = 32767 * (x - minX) * invSize;\n  y = 32767 * (y - minY) * invSize;\n  x = (x | x << 8) & 0x00FF00FF;\n  x = (x | x << 4) & 0x0F0F0F0F;\n  x = (x | x << 2) & 0x33333333;\n  x = (x | x << 1) & 0x55555555;\n  y = (y | y << 8) & 0x00FF00FF;\n  y = (y | y << 4) & 0x0F0F0F0F;\n  y = (y | y << 2) & 0x33333333;\n  y = (y | y << 1) & 0x55555555;\n  return x | y << 1;\n} // find the leftmost node of a polygon ring\n\n\nfunction getLeftmost(start) {\n  var p = start,\n      leftmost = start;\n\n  do {\n    if (p.x < leftmost.x || p.x === leftmost.x && p.y < leftmost.y) leftmost = p;\n    p = p.next;\n  } while (p !== start);\n\n  return leftmost;\n} // check if a point lies within a convex triangle\n\n\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n  return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 && (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 && (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n} // check if a diagonal between two polygon nodes is valid (lies in polygon interior)\n\n\nfunction isValidDiagonal(a, b) {\n  return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n} // signed area of a triangle\n\n\nfunction area(p, q, r) {\n  return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n} // check if two points are equal\n\n\nfunction equals(p1, p2) {\n  return p1.x === p2.x && p1.y === p2.y;\n} // check if two segments intersect\n\n\nfunction intersects(p1, q1, p2, q2) {\n  if (equals(p1, p2) && equals(q1, q2) || equals(p1, q2) && equals(p2, q1)) return true;\n  return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 && area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n} // check if a polygon diagonal intersects any polygon segments\n\n\nfunction intersectsPolygon(a, b) {\n  var p = a;\n\n  do {\n    if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i && intersects(p, p.next, a, b)) return true;\n    p = p.next;\n  } while (p !== a);\n\n  return false;\n} // check if a polygon diagonal is locally inside the polygon\n\n\nfunction locallyInside(a, b) {\n  return area(a.prev, a, a.next) < 0 ? area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 : area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n} // check if the middle point of a polygon diagonal is inside the polygon\n\n\nfunction middleInside(a, b) {\n  var p = a,\n      inside = false,\n      px = (a.x + b.x) / 2,\n      py = (a.y + b.y) / 2;\n\n  do {\n    if (p.y > py !== p.next.y > py && p.next.y !== p.y && px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x) inside = !inside;\n    p = p.next;\n  } while (p !== a);\n\n  return inside;\n} // link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\n\n\nfunction splitPolygon(a, b) {\n  var a2 = new Node(a.i, a.x, a.y),\n      b2 = new Node(b.i, b.x, b.y),\n      an = a.next,\n      bp = b.prev;\n  a.next = b;\n  b.prev = a;\n  a2.next = an;\n  an.prev = a2;\n  b2.next = a2;\n  a2.prev = b2;\n  bp.next = b2;\n  b2.prev = bp;\n  return b2;\n} // create a node and optionally link it with previous one (in a circular doubly linked list)\n\n\nfunction insertNode(i, x, y, last) {\n  var p = new Node(i, x, y);\n\n  if (!last) {\n    p.prev = p;\n    p.next = p;\n  } else {\n    p.next = last.next;\n    p.prev = last;\n    last.next.prev = p;\n    last.next = p;\n  }\n\n  return p;\n}\n\nfunction removeNode(p) {\n  p.next.prev = p.prev;\n  p.prev.next = p.next;\n  if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n  if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n  // vertex index in coordinates array\n  this.i = i; // vertex coordinates\n\n  this.x = x;\n  this.y = y; // previous and next vertex nodes in a polygon ring\n\n  this.prev = null;\n  this.next = null; // z-order curve value\n\n  this.z = null; // previous and next nodes in z-order\n\n  this.prevZ = null;\n  this.nextZ = null; // indicates whether this is a steiner point\n\n  this.steiner = false;\n}\n\nfunction signedArea(data, start, end, dim) {\n  var sum = 0;\n\n  for (var i = start, j = end - dim; i < end; i += dim) {\n    sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n    j = i;\n  }\n\n  return sum;\n}\n\nexport { Earcut };","map":{"version":3,"sources":["/Users/tank/git/Portfolio/next-portfolio/node_modules/three/src/extras/Earcut.js"],"names":["Earcut","triangulate","data","holeIndices","dim","hasHoles","length","outerLen","outerNode","linkedList","triangles","next","prev","minX","minY","maxX","maxY","x","y","invSize","eliminateHoles","i","Math","max","earcutLinked","start","end","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","p","again","steiner","area","ear","pass","indexCurve","stop","isEarHashed","isEar","push","cureLocalIntersections","splitEarcut","a","b","c","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","zOrder","maxZ","prevZ","n","nextZ","z","intersects","locallyInside","isValidDiagonal","splitPolygon","queue","len","list","getLeftmost","sort","compareX","eliminateHole","hole","findHoleBridge","hx","hy","qx","Infinity","m","mx","my","tanMin","tan","abs","sortLinked","q","e","tail","numMerges","pSize","qSize","inSize","leftmost","ax","ay","bx","by","cx","cy","px","py","intersectsPolygon","middleInside","r","p1","p2","q1","q2","inside","a2","Node","b2","an","bp","sum","j"],"mappings":"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","sourcesContent":["/**\n * @author Mugen87 / https://github.com/Mugen87\n * Port from https://github.com/mapbox/earcut (v2.1.5)\n */\n\nvar Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tvar hasHoles = holeIndices && holeIndices.length,\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\n\t\t\ttriangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tvar minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( var i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tvar i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tvar p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tvar stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( ear, triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tvar p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tvar minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tvar minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tvar p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tvar p = start;\n\tdo {\n\n\t\tvar a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn p;\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tvar a = start;\n\tdo {\n\n\t\tvar b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tvar c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tvar queue = [],\n\t\ti, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tvar b = splitPolygon( outerNode, hole );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tvar p = outerNode,\n\t\thx = hole.x,\n\t\thy = hole.y,\n\t\tqx = - Infinity,\n\t\tm;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tvar x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tvar stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y,\n\t\ttanMin = Infinity,\n\t\ttan;\n\n\tp = m.next;\n\n\twhile ( p !== stop ) {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn m;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tvar p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tvar i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tvar p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t   ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t   ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\n\t\t   locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tif ( ( equals( p1, p2 ) && equals( q1, q2 ) ) ||\n\t\t( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\n\treturn area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\n\t\t   area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tvar p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tvar p = a,\n\t\tinside = false,\n\t\tpx = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tvar a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tvar p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tvar sum = 0;\n\tfor ( var i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nexport { Earcut };\n"]},"metadata":{},"sourceType":"module"}