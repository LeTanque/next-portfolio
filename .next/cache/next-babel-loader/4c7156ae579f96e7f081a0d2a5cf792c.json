{"ast":null,"code":"import _Object$create from \"@babel/runtime-corejs2/core-js/object/create\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\nimport { Object3D } from '../core/Object3D.js';\n\nfunction Audio(listener) {\n  Object3D.call(this);\n  this.type = 'Audio';\n  this.listener = listener;\n  this.context = listener.context;\n  this.gain = this.context.createGain();\n  this.gain.connect(listener.getInput());\n  this.autoplay = false;\n  this.buffer = null;\n  this.detune = 0;\n  this.loop = false;\n  this.loopStart = 0;\n  this.loopEnd = 0;\n  this.offset = 0;\n  this.duration = undefined;\n  this.playbackRate = 1;\n  this.isPlaying = false;\n  this.hasPlaybackControl = true;\n  this.sourceType = 'empty';\n  this._startedAt = 0;\n  this._pausedAt = 0;\n  this.filters = [];\n}\n\nAudio.prototype = _Object$assign(_Object$create(Object3D.prototype), {\n  constructor: Audio,\n  getOutput: function getOutput() {\n    return this.gain;\n  },\n  setNodeSource: function setNodeSource(audioNode) {\n    this.hasPlaybackControl = false;\n    this.sourceType = 'audioNode';\n    this.source = audioNode;\n    this.connect();\n    return this;\n  },\n  setMediaElementSource: function setMediaElementSource(mediaElement) {\n    this.hasPlaybackControl = false;\n    this.sourceType = 'mediaNode';\n    this.source = this.context.createMediaElementSource(mediaElement);\n    this.connect();\n    return this;\n  },\n  setMediaStreamSource: function setMediaStreamSource(mediaStream) {\n    this.hasPlaybackControl = false;\n    this.sourceType = 'mediaStreamNode';\n    this.source = this.context.createMediaStreamSource(mediaStream);\n    this.connect();\n    return this;\n  },\n  setBuffer: function setBuffer(audioBuffer) {\n    this.buffer = audioBuffer;\n    this.sourceType = 'buffer';\n    if (this.autoplay) this.play();\n    return this;\n  },\n  play: function play(delay) {\n    if (delay === undefined) delay = 0;\n\n    if (this.isPlaying === true) {\n      console.warn('THREE.Audio: Audio is already playing.');\n      return;\n    }\n\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    this._startedAt = this.context.currentTime + delay;\n    var source = this.context.createBufferSource();\n    source.buffer = this.buffer;\n    source.loop = this.loop;\n    source.loopStart = this.loopStart;\n    source.loopEnd = this.loopEnd;\n    source.onended = this.onEnded.bind(this);\n    source.start(this._startedAt, this._pausedAt + this.offset, this.duration);\n    this.isPlaying = true;\n    this.source = source;\n    this.setDetune(this.detune);\n    this.setPlaybackRate(this.playbackRate);\n    return this.connect();\n  },\n  pause: function pause() {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    if (this.isPlaying === true) {\n      this._pausedAt = (this.context.currentTime - this._startedAt) * this.playbackRate;\n      this.source.stop();\n      this.source.onended = null;\n      this.isPlaying = false;\n    }\n\n    return this;\n  },\n  stop: function stop() {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    this._pausedAt = 0;\n    this.source.stop();\n    this.source.onended = null;\n    this.isPlaying = false;\n    return this;\n  },\n  connect: function connect() {\n    if (this.filters.length > 0) {\n      this.source.connect(this.filters[0]);\n\n      for (var i = 1, l = this.filters.length; i < l; i++) {\n        this.filters[i - 1].connect(this.filters[i]);\n      }\n\n      this.filters[this.filters.length - 1].connect(this.getOutput());\n    } else {\n      this.source.connect(this.getOutput());\n    }\n\n    return this;\n  },\n  disconnect: function disconnect() {\n    if (this.filters.length > 0) {\n      this.source.disconnect(this.filters[0]);\n\n      for (var i = 1, l = this.filters.length; i < l; i++) {\n        this.filters[i - 1].disconnect(this.filters[i]);\n      }\n\n      this.filters[this.filters.length - 1].disconnect(this.getOutput());\n    } else {\n      this.source.disconnect(this.getOutput());\n    }\n\n    return this;\n  },\n  getFilters: function getFilters() {\n    return this.filters;\n  },\n  setFilters: function setFilters(value) {\n    if (!value) value = [];\n\n    if (this.isPlaying === true) {\n      this.disconnect();\n      this.filters = value;\n      this.connect();\n    } else {\n      this.filters = value;\n    }\n\n    return this;\n  },\n  setDetune: function setDetune(value) {\n    this.detune = value;\n    if (this.source.detune === undefined) return; // only set detune when available\n\n    if (this.isPlaying === true) {\n      this.source.detune.setTargetAtTime(this.detune, this.context.currentTime, 0.01);\n    }\n\n    return this;\n  },\n  getDetune: function getDetune() {\n    return this.detune;\n  },\n  getFilter: function getFilter() {\n    return this.getFilters()[0];\n  },\n  setFilter: function setFilter(filter) {\n    return this.setFilters(filter ? [filter] : []);\n  },\n  setPlaybackRate: function setPlaybackRate(value) {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    this.playbackRate = value;\n\n    if (this.isPlaying === true) {\n      this.source.playbackRate.setTargetAtTime(this.playbackRate, this.context.currentTime, 0.01);\n    }\n\n    return this;\n  },\n  getPlaybackRate: function getPlaybackRate() {\n    return this.playbackRate;\n  },\n  onEnded: function onEnded() {\n    this.isPlaying = false;\n  },\n  getLoop: function getLoop() {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return false;\n    }\n\n    return this.loop;\n  },\n  setLoop: function setLoop(value) {\n    if (this.hasPlaybackControl === false) {\n      console.warn('THREE.Audio: this Audio has no playback control.');\n      return;\n    }\n\n    this.loop = value;\n\n    if (this.isPlaying === true) {\n      this.source.loop = this.loop;\n    }\n\n    return this;\n  },\n  setLoopStart: function setLoopStart(value) {\n    this.loopStart = value;\n    return this;\n  },\n  setLoopEnd: function setLoopEnd(value) {\n    this.loopEnd = value;\n    return this;\n  },\n  getVolume: function getVolume() {\n    return this.gain.gain.value;\n  },\n  setVolume: function setVolume(value) {\n    this.gain.gain.setTargetAtTime(value, this.context.currentTime, 0.01);\n    return this;\n  }\n});\nexport { Audio };","map":{"version":3,"sources":["/Users/tank/git/Portfolio/next-portfolio/node_modules/three/src/audio/Audio.js"],"names":["Object3D","Audio","listener","call","type","context","gain","createGain","connect","getInput","autoplay","buffer","detune","loop","loopStart","loopEnd","offset","duration","undefined","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_pausedAt","filters","prototype","constructor","getOutput","setNodeSource","audioNode","source","setMediaElementSource","mediaElement","createMediaElementSource","setMediaStreamSource","mediaStream","createMediaStreamSource","setBuffer","audioBuffer","play","delay","console","warn","currentTime","createBufferSource","onended","onEnded","bind","start","setDetune","setPlaybackRate","pause","stop","length","i","l","disconnect","getFilters","setFilters","value","setTargetAtTime","getDetune","getFilter","setFilter","filter","getPlaybackRate","getLoop","setLoop","setLoopStart","setLoopEnd","getVolume","setVolume"],"mappings":";;;AAAA;;;;AAKA,SAASA,QAAT,QAAyB,qBAAzB;;AAEA,SAASC,KAAT,CAAgBC,QAAhB,EAA2B;AAE1BF,EAAAA,QAAQ,CAACG,IAAT,CAAe,IAAf;AAEA,OAAKC,IAAL,GAAY,OAAZ;AAEA,OAAKF,QAAL,GAAgBA,QAAhB;AACA,OAAKG,OAAL,GAAeH,QAAQ,CAACG,OAAxB;AAEA,OAAKC,IAAL,GAAY,KAAKD,OAAL,CAAaE,UAAb,EAAZ;AACA,OAAKD,IAAL,CAAUE,OAAV,CAAmBN,QAAQ,CAACO,QAAT,EAAnB;AAEA,OAAKC,QAAL,GAAgB,KAAhB;AAEA,OAAKC,MAAL,GAAc,IAAd;AACA,OAAKC,MAAL,GAAc,CAAd;AACA,OAAKC,IAAL,GAAY,KAAZ;AACA,OAAKC,SAAL,GAAiB,CAAjB;AACA,OAAKC,OAAL,GAAe,CAAf;AACA,OAAKC,MAAL,GAAc,CAAd;AACA,OAAKC,QAAL,GAAgBC,SAAhB;AACA,OAAKC,YAAL,GAAoB,CAApB;AACA,OAAKC,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,IAA1B;AACA,OAAKC,UAAL,GAAkB,OAAlB;AAEA,OAAKC,UAAL,GAAkB,CAAlB;AACA,OAAKC,SAAL,GAAiB,CAAjB;AAEA,OAAKC,OAAL,GAAe,EAAf;AAEA;;AAEDxB,KAAK,CAACyB,SAAN,GAAkB,eAAe,eAAe1B,QAAQ,CAAC0B,SAAxB,CAAf,EAAoD;AAErEC,EAAAA,WAAW,EAAE1B,KAFwD;AAIrE2B,EAAAA,SAAS,EAAE,qBAAY;AAEtB,WAAO,KAAKtB,IAAZ;AAEA,GARoE;AAUrEuB,EAAAA,aAAa,EAAE,uBAAWC,SAAX,EAAuB;AAErC,SAAKT,kBAAL,GAA0B,KAA1B;AACA,SAAKC,UAAL,GAAkB,WAAlB;AACA,SAAKS,MAAL,GAAcD,SAAd;AACA,SAAKtB,OAAL;AAEA,WAAO,IAAP;AAEA,GAnBoE;AAqBrEwB,EAAAA,qBAAqB,EAAE,+BAAWC,YAAX,EAA0B;AAEhD,SAAKZ,kBAAL,GAA0B,KAA1B;AACA,SAAKC,UAAL,GAAkB,WAAlB;AACA,SAAKS,MAAL,GAAc,KAAK1B,OAAL,CAAa6B,wBAAb,CAAuCD,YAAvC,CAAd;AACA,SAAKzB,OAAL;AAEA,WAAO,IAAP;AAEA,GA9BoE;AAgCrE2B,EAAAA,oBAAoB,EAAE,8BAAWC,WAAX,EAAyB;AAE9C,SAAKf,kBAAL,GAA0B,KAA1B;AACA,SAAKC,UAAL,GAAkB,iBAAlB;AACA,SAAKS,MAAL,GAAc,KAAK1B,OAAL,CAAagC,uBAAb,CAAsCD,WAAtC,CAAd;AACA,SAAK5B,OAAL;AAEA,WAAO,IAAP;AAEA,GAzCoE;AA2CrE8B,EAAAA,SAAS,EAAE,mBAAWC,WAAX,EAAyB;AAEnC,SAAK5B,MAAL,GAAc4B,WAAd;AACA,SAAKjB,UAAL,GAAkB,QAAlB;AAEA,QAAK,KAAKZ,QAAV,EAAqB,KAAK8B,IAAL;AAErB,WAAO,IAAP;AAEA,GApDoE;AAsDrEA,EAAAA,IAAI,EAAE,cAAWC,KAAX,EAAmB;AAExB,QAAKA,KAAK,KAAKvB,SAAf,EAA2BuB,KAAK,GAAG,CAAR;;AAE3B,QAAK,KAAKrB,SAAL,KAAmB,IAAxB,EAA+B;AAE9BsB,MAAAA,OAAO,CAACC,IAAR,CAAc,wCAAd;AACA;AAEA;;AAED,QAAK,KAAKtB,kBAAL,KAA4B,KAAjC,EAAyC;AAExCqB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,SAAKpB,UAAL,GAAkB,KAAKlB,OAAL,CAAauC,WAAb,GAA2BH,KAA7C;AAEA,QAAIV,MAAM,GAAG,KAAK1B,OAAL,CAAawC,kBAAb,EAAb;AACAd,IAAAA,MAAM,CAACpB,MAAP,GAAgB,KAAKA,MAArB;AACAoB,IAAAA,MAAM,CAAClB,IAAP,GAAc,KAAKA,IAAnB;AACAkB,IAAAA,MAAM,CAACjB,SAAP,GAAmB,KAAKA,SAAxB;AACAiB,IAAAA,MAAM,CAAChB,OAAP,GAAiB,KAAKA,OAAtB;AACAgB,IAAAA,MAAM,CAACe,OAAP,GAAiB,KAAKC,OAAL,CAAaC,IAAb,CAAmB,IAAnB,CAAjB;AACAjB,IAAAA,MAAM,CAACkB,KAAP,CAAc,KAAK1B,UAAnB,EAA+B,KAAKC,SAAL,GAAiB,KAAKR,MAArD,EAA6D,KAAKC,QAAlE;AAEA,SAAKG,SAAL,GAAiB,IAAjB;AAEA,SAAKW,MAAL,GAAcA,MAAd;AAEA,SAAKmB,SAAL,CAAgB,KAAKtC,MAArB;AACA,SAAKuC,eAAL,CAAsB,KAAKhC,YAA3B;AAEA,WAAO,KAAKX,OAAL,EAAP;AAEA,GA3FoE;AA6FrE4C,EAAAA,KAAK,EAAE,iBAAY;AAElB,QAAK,KAAK/B,kBAAL,KAA4B,KAAjC,EAAyC;AAExCqB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,QAAK,KAAKvB,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKI,SAAL,GAAiB,CAAE,KAAKnB,OAAL,CAAauC,WAAb,GAA2B,KAAKrB,UAAlC,IAAiD,KAAKJ,YAAvE;AAEA,WAAKY,MAAL,CAAYsB,IAAZ;AACA,WAAKtB,MAAL,CAAYe,OAAZ,GAAsB,IAAtB;AAEA,WAAK1B,SAAL,GAAiB,KAAjB;AAEA;;AAED,WAAO,IAAP;AAEA,GAnHoE;AAqHrEiC,EAAAA,IAAI,EAAE,gBAAY;AAEjB,QAAK,KAAKhC,kBAAL,KAA4B,KAAjC,EAAyC;AAExCqB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,SAAKnB,SAAL,GAAiB,CAAjB;AAEA,SAAKO,MAAL,CAAYsB,IAAZ;AACA,SAAKtB,MAAL,CAAYe,OAAZ,GAAsB,IAAtB;AACA,SAAK1B,SAAL,GAAiB,KAAjB;AAEA,WAAO,IAAP;AAEA,GAtIoE;AAwIrEZ,EAAAA,OAAO,EAAE,mBAAY;AAEpB,QAAK,KAAKiB,OAAL,CAAa6B,MAAb,GAAsB,CAA3B,EAA+B;AAE9B,WAAKvB,MAAL,CAAYvB,OAAZ,CAAqB,KAAKiB,OAAL,CAAc,CAAd,CAArB;;AAEA,WAAM,IAAI8B,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAG,KAAK/B,OAAL,CAAa6B,MAAlC,EAA0CC,CAAC,GAAGC,CAA9C,EAAiDD,CAAC,EAAlD,EAAwD;AAEvD,aAAK9B,OAAL,CAAc8B,CAAC,GAAG,CAAlB,EAAsB/C,OAAtB,CAA+B,KAAKiB,OAAL,CAAc8B,CAAd,CAA/B;AAEA;;AAED,WAAK9B,OAAL,CAAc,KAAKA,OAAL,CAAa6B,MAAb,GAAsB,CAApC,EAAwC9C,OAAxC,CAAiD,KAAKoB,SAAL,EAAjD;AAEA,KAZD,MAYO;AAEN,WAAKG,MAAL,CAAYvB,OAAZ,CAAqB,KAAKoB,SAAL,EAArB;AAEA;;AAED,WAAO,IAAP;AAEA,GA9JoE;AAgKrE6B,EAAAA,UAAU,EAAE,sBAAY;AAEvB,QAAK,KAAKhC,OAAL,CAAa6B,MAAb,GAAsB,CAA3B,EAA+B;AAE9B,WAAKvB,MAAL,CAAY0B,UAAZ,CAAwB,KAAKhC,OAAL,CAAc,CAAd,CAAxB;;AAEA,WAAM,IAAI8B,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAG,KAAK/B,OAAL,CAAa6B,MAAlC,EAA0CC,CAAC,GAAGC,CAA9C,EAAiDD,CAAC,EAAlD,EAAwD;AAEvD,aAAK9B,OAAL,CAAc8B,CAAC,GAAG,CAAlB,EAAsBE,UAAtB,CAAkC,KAAKhC,OAAL,CAAc8B,CAAd,CAAlC;AAEA;;AAED,WAAK9B,OAAL,CAAc,KAAKA,OAAL,CAAa6B,MAAb,GAAsB,CAApC,EAAwCG,UAAxC,CAAoD,KAAK7B,SAAL,EAApD;AAEA,KAZD,MAYO;AAEN,WAAKG,MAAL,CAAY0B,UAAZ,CAAwB,KAAK7B,SAAL,EAAxB;AAEA;;AAED,WAAO,IAAP;AAEA,GAtLoE;AAwLrE8B,EAAAA,UAAU,EAAE,sBAAY;AAEvB,WAAO,KAAKjC,OAAZ;AAEA,GA5LoE;AA8LrEkC,EAAAA,UAAU,EAAE,oBAAWC,KAAX,EAAmB;AAE9B,QAAK,CAAEA,KAAP,EAAeA,KAAK,GAAG,EAAR;;AAEf,QAAK,KAAKxC,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKqC,UAAL;AACA,WAAKhC,OAAL,GAAemC,KAAf;AACA,WAAKpD,OAAL;AAEA,KAND,MAMO;AAEN,WAAKiB,OAAL,GAAemC,KAAf;AAEA;;AAED,WAAO,IAAP;AAEA,GAhNoE;AAkNrEV,EAAAA,SAAS,EAAE,mBAAWU,KAAX,EAAmB;AAE7B,SAAKhD,MAAL,GAAcgD,KAAd;AAEA,QAAK,KAAK7B,MAAL,CAAYnB,MAAZ,KAAuBM,SAA5B,EAAwC,OAJX,CAImB;;AAEhD,QAAK,KAAKE,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKW,MAAL,CAAYnB,MAAZ,CAAmBiD,eAAnB,CAAoC,KAAKjD,MAAzC,EAAiD,KAAKP,OAAL,CAAauC,WAA9D,EAA2E,IAA3E;AAEA;;AAED,WAAO,IAAP;AAEA,GAhOoE;AAkOrEkB,EAAAA,SAAS,EAAE,qBAAY;AAEtB,WAAO,KAAKlD,MAAZ;AAEA,GAtOoE;AAwOrEmD,EAAAA,SAAS,EAAE,qBAAY;AAEtB,WAAO,KAAKL,UAAL,GAAmB,CAAnB,CAAP;AAEA,GA5OoE;AA8OrEM,EAAAA,SAAS,EAAE,mBAAWC,MAAX,EAAoB;AAE9B,WAAO,KAAKN,UAAL,CAAiBM,MAAM,GAAG,CAAEA,MAAF,CAAH,GAAgB,EAAvC,CAAP;AAEA,GAlPoE;AAoPrEd,EAAAA,eAAe,EAAE,yBAAWS,KAAX,EAAmB;AAEnC,QAAK,KAAKvC,kBAAL,KAA4B,KAAjC,EAAyC;AAExCqB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,SAAKxB,YAAL,GAAoByC,KAApB;;AAEA,QAAK,KAAKxC,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKW,MAAL,CAAYZ,YAAZ,CAAyB0C,eAAzB,CAA0C,KAAK1C,YAA/C,EAA6D,KAAKd,OAAL,CAAauC,WAA1E,EAAuF,IAAvF;AAEA;;AAED,WAAO,IAAP;AAEA,GAvQoE;AAyQrEsB,EAAAA,eAAe,EAAE,2BAAY;AAE5B,WAAO,KAAK/C,YAAZ;AAEA,GA7QoE;AA+QrE4B,EAAAA,OAAO,EAAE,mBAAY;AAEpB,SAAK3B,SAAL,GAAiB,KAAjB;AAEA,GAnRoE;AAqRrE+C,EAAAA,OAAO,EAAE,mBAAY;AAEpB,QAAK,KAAK9C,kBAAL,KAA4B,KAAjC,EAAyC;AAExCqB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA,aAAO,KAAP;AAEA;;AAED,WAAO,KAAK9B,IAAZ;AAEA,GAhSoE;AAkSrEuD,EAAAA,OAAO,EAAE,iBAAWR,KAAX,EAAmB;AAE3B,QAAK,KAAKvC,kBAAL,KAA4B,KAAjC,EAAyC;AAExCqB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,SAAK9B,IAAL,GAAY+C,KAAZ;;AAEA,QAAK,KAAKxC,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKW,MAAL,CAAYlB,IAAZ,GAAmB,KAAKA,IAAxB;AAEA;;AAED,WAAO,IAAP;AAEA,GArToE;AAuTrEwD,EAAAA,YAAY,EAAE,sBAAWT,KAAX,EAAmB;AAEhC,SAAK9C,SAAL,GAAiB8C,KAAjB;AAEA,WAAO,IAAP;AAEA,GA7ToE;AA+TrEU,EAAAA,UAAU,EAAE,oBAAWV,KAAX,EAAmB;AAE9B,SAAK7C,OAAL,GAAe6C,KAAf;AAEA,WAAO,IAAP;AAEA,GArUoE;AAuUrEW,EAAAA,SAAS,EAAE,qBAAY;AAEtB,WAAO,KAAKjE,IAAL,CAAUA,IAAV,CAAesD,KAAtB;AAEA,GA3UoE;AA6UrEY,EAAAA,SAAS,EAAE,mBAAWZ,KAAX,EAAmB;AAE7B,SAAKtD,IAAL,CAAUA,IAAV,CAAeuD,eAAf,CAAgCD,KAAhC,EAAuC,KAAKvD,OAAL,CAAauC,WAApD,EAAiE,IAAjE;AAEA,WAAO,IAAP;AAEA;AAnVoE,CAApD,CAAlB;AAuVA,SAAS3C,KAAT","sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com/\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nimport { Object3D } from '../core/Object3D.js';\n\nfunction Audio( listener ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Audio';\n\n\tthis.listener = listener;\n\tthis.context = listener.context;\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( listener.getInput() );\n\n\tthis.autoplay = false;\n\n\tthis.buffer = null;\n\tthis.detune = 0;\n\tthis.loop = false;\n\tthis.loopStart = 0;\n\tthis.loopEnd = 0;\n\tthis.offset = 0;\n\tthis.duration = undefined;\n\tthis.playbackRate = 1;\n\tthis.isPlaying = false;\n\tthis.hasPlaybackControl = true;\n\tthis.sourceType = 'empty';\n\n\tthis._startedAt = 0;\n\tthis._pausedAt = 0;\n\n\tthis.filters = [];\n\n}\n\nAudio.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Audio,\n\n\tgetOutput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tsetNodeSource: function ( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetMediaElementSource: function ( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetMediaStreamSource: function ( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetBuffer: function ( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t},\n\n\tplay: function ( delay ) {\n\n\t\tif ( delay === undefined ) delay = 0;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tvar source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._pausedAt + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t},\n\n\tpause: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis._pausedAt = ( this.context.currentTime - this._startedAt ) * this.playbackRate;\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._pausedAt = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t},\n\n\tconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilters: function () {\n\n\t\treturn this.filters;\n\n\t},\n\n\tsetFilters: function ( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value;\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetDetune: function ( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetDetune: function () {\n\n\t\treturn this.detune;\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t},\n\n\tsetFilter: function ( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t},\n\n\tsetPlaybackRate: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetPlaybackRate: function () {\n\n\t\treturn this.playbackRate;\n\n\t},\n\n\tonEnded: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tgetLoop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t},\n\n\tsetLoop: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetLoopStart: function ( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t},\n\n\tsetLoopEnd: function ( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\tsetVolume: function ( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { Audio };\n"]},"metadata":{},"sourceType":"module"}